[Rainmeter]
Update=100
Author=Connect-R
BackgroundMode=2
SolidColor=0,0,0,1
DynamicWindowSize=1
AccurateText=1

[Variables]
Scale=2

;-------------------- MEASURES ---------------------
[MeasureArtist]
Measure=NowPlaying
PlayerName=CAD
PlayerType=ARTIST
Substitute="":""

[MeasureTitle]
Measure=NowPlaying
PlayerName=CAD
PlayerType=TITLE
Substitute="":""

[MeasureAlbum]
Measure=NowPlaying
PlayerName=CAD
PlayerType=ALBUM
Substitute="":""

[MeasureProgress]
Measure=NowPlaying
PlayerName=CAD
PlayerType=PROGRESS

[MeasureDuration]
Measure=NowPlaying
PlayerName=CAD
PlayerType=DURATION
UpdateDivider=1
FormatSeconds=1
Substitute="":"00:00"

[MeasurePosition]
Measure=NowPlaying
PlayerName=CAD
PlayerType=POSITION
UpdateDivider=1
FormatSeconds=1
Substitute="":"00:00"

[MeasureStateButton]
Measure=NowPlaying
PlayerName=CAD
PlayerType=STATE
Substitute="0":"#@#Play.png","1":"#@#Pause.png","2":"#@#Play.png"

[MeasureMinutesRemaining]
Measure=Calc
Formula=Trunc((MeasureDuration - MeasurePosition)/60)
RegExpSubstitute=1
Substitute="^(.)$":"0\1"

[MeasureSecondsRemaining]
Measure=Calc
Formula=((MeasureDuration - MeasurePosition)%60)
RegExpSubstitute=1
Substitute="^(.)$":"0\1"

[MeasureElapsedPercent]
Measure=Calc
Formula=(100*MeasurePosition/MeasureDuration)
Substitute="NAN":"0"
IfAboveValue=100
IfAboveAction=[!SetVariable MeasureElapsedPercent 100]

[MeasureRemainingPercent]
Measure=Calc
Formula=(100-MeasureElapsedPercent)
Substitute="NAN":"0"
IfBelowValue=0
IfBelowAction=[!SetVariable MeasureRemainingPercent 0]

;-------------------- METERS ---------------------
[MeterBG]
Meter=Image
SolidColor=0,0,0,0
W=625
H=175

; -- Row 1: Durations (Elapsed moved left, Remaining stays similar) --
[MeterElapsedTotal]
Meter=String
MeasureName=MeasurePosition
MeasureName2=MeasureDuration
StringAlign=Left
FontFace=Quicksand
FontColor=255,255,255
FontSize=18
X=24
Y=14
Text="%1 / %2"
AntiAlias=1

[MeterRemainingDur]
Meter=String
MeasureName=MeasureMinutesRemaining
MeasureName2=MeasureSecondsRemaining
StringAlign=Right
FontFace=Quicksand
FontColor=255,255,255
FontSize=18
X=601
Y=14
Text="-%1:%2"
AntiAlias=1

; -- Row 2: Progress Bar (300px, centered!)
[MeterBar]
Meter=Shape
X=212           ; 162 + 50 = 212
Y=30
Shape=Rectangle 0,0,300,3,1 | Fill Color 255,255,255,100 | StrokeWidth 0
Shape2=Rectangle 0,0,([MeasureProgress]*3.0),3,1 | Fill Color 255,255,255 | StrokeWidth 0
DynamicVariables=1

; -- Row 3: Percentages centered horizontally below the durations --
[MeterElapsedPercent]
Meter=String
MeasureName=MeasureElapsedPercent
StringAlign=Center
FontFace=Quicksand
FontColor=255,255,255
FontSize=15
X=97  ; (24 + (162-24)/2) = 93 but shifted a bit more to center under time
Y=48
Text="%1%"
AntiAlias=1

[MeterRemainingPercent]
Meter=String
MeasureName=MeasureRemainingPercent
StringAlign=Center
FontFace=Quicksand
FontColor=255,255,255
FontSize=15
X=553 ; (601 + (162+300-601)/2) = 553, centered under -remaining
Y=48
Text="%1%"
AntiAlias=1

; -- Title: smaller (FontSize=18), moved further down --
[MeterTitle]
Meter=String
MeasureName=MeasureTitle
StringAlign=Center
StringCase=Upper
FontFace=Aquatico
FontColor=255,255,255
FontSize=18
X=312
Y=73
Text="%1"
AntiAlias=1

; -- Artist: adequate gap below title --
[MeterArtist]
Meter=String
MeasureName=MeasureArtist
StringAlign=Center
StringCase=Upper
FontFace=Aquatico
FontColor=255,255,255
FontSize=12
X=312
Y=98
Text="%1"
AntiAlias=1

; -- Controls centered row (unchanged) --
[MeterPrevious]
Meter=Image
ImageName=#@#Previous.png
W=56
H=56
X=176
Y=120
AntiAlias=1
ImageTint=255,140,0
SolidColor=0,0,0,1
LeftMouseUpAction=[!PluginBang "MeasureStateButton Previous"]

[MeterPlayPause]
Meter=Image
ImageName=[MeasureStateButton]
W=56
H=56
X=284
Y=120
AntiAlias=1
SolidColor=0,0,0,1
ImageTint=255,140,0
DynamicVariables=1
LeftMouseUpAction=[!CommandMeasure "MeasureStateButton" "PlayPause"]

[MeterNext]
Meter=Image
ImageName=#@#Next.png
W=56
H=56
X=392
Y=120
AntiAlias=1
ImageTint=255,140,0
SolidColor=0,0,0,1
LeftMouseUpAction=[!PluginBang "MeasureStateButton Next"]
